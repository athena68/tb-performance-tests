# Smart Meter Telemetry Data Configuration
# Utility meter consumption and status telemetry

# Telemetry data points definition
data_points:
  # Energy consumption (electricity)
  pulse_counter:
    unit: "count"
    min: 0
    max: 999999999
    default: 1234567
    cumulative: true
    increment_rate: 0.01        # Pulses per message (approximate)

  total_consumption_kwh:
    unit: "kWh"
    min: 0
    max: 9999999.999
    default: 12345.67
    cumulative: true
    increment_rate: 0.1         # kWh per message (varies with load)

  instantaneous_power_kw:
    unit: "kW"
    min: 0
    max: 100
    default: 2.5
    load_correlation: true
    time_of_day_factor: true

  # Voltage and current (electricity)
  voltage_l1_v:
    unit: "V"
    min: 200
    max: 250
    default: 230
    variation: 5.0              # ±5V normal variation

  voltage_l2_v:
    unit: "V"
    min: 200
    max: 250
    default: 230
    variation: 5.0

  voltage_l3_v:
    unit: "V"
    min: 200
    max: 250
    default: 230
    variation: 5.0

  current_l1_a:
    unit: "A"
    min: 0
    max: 100
    default: 15
    power_correlation: true

  current_l2_a:
    unit: "A"
    min: 0
    max: 100
    default: 12
    power_correlation: true

  current_l3_a:
    unit: "A"
    min: 0
    max: 100
    default: 18
    power_correlation: true

  # Power quality
  frequency_hz:
    unit: "Hz"
    min: 48
    max: 52
    default: 50
    variation: 0.2              # ±0.2Hz normal variation

  power_factor:
    unit: ""
    min: 0.8
    max: 1.0
    default: 0.95
    load_type_dependent: true

  thd_voltage_l1:
    unit: "%"
    min: 0
    max: 10
    default: 2.5
    quality_indicator: true

  # Water consumption metrics
  water_flow_rate_lpm:
    unit: "L/min"
    min: 0
    max: 500
    default: 12.5
    time_of_day_factor: true

  total_water_m3:
    unit: "m³"
    min: 0
    max: 9999999.999
    default: 3456.78
    cumulative: true
    increment_rate: 0.001        # m³ per message

  instantaneous_water_temperature:
    unit: "°C"
    min: 5
    max: 35
    default: 18
    seasonal_variation: true

  # Gas consumption metrics
  gas_flow_rate_m3h:
    unit: "m³/h"
    min: 0
    max: 100
    default: 2.5
    heating_correlation: true

  total_gas_m3:
    unit: "m³"
    min: 0
    max: 9999999.999
    default: 8765.43
    cumulative: true
    increment_rate: 0.005        # m³ per message

  gas_temperature:
    unit: "°C"
    min: -10
    max: 50
    default: 15
    seasonal_variation: true

  gas_pressure_bar:
    unit: "bar"
    min: 0.5
    max: 100
    default: 2.0
    variation: 0.1

  # Device status and diagnostics
  device_status:
    unit: ""
    values: ["Normal", "Warning", "Error", "Maintenance", "Off"]
    default: "Normal"
    probabilities:
      Normal: 0.95
      Warning: 0.03
      Error: 0.01
      Maintenance: 0.009
      Off: 0.001

  battery_level:
    unit: "%"
    min: 0
    max: 100
    default: 85
    persistent: true
    slow_drain: 0.001             # Very slow drain

  signal_strength:
    unit: "dBm"
    min: -120
    max: -30
    default: -70
    quality_levels:
      excellent: ">-70"
      good: "-70 to -85"
      fair: "-85 to -100"
      poor: "<-100"

  communication_status:
    unit: ""
    values: ["Online", "Offline", "Error", "Connecting"]
    default: "Online"
    offline_probability: 0.005    # 0.5% chance offline

  last_reading_time:
    unit: "timestamp"
    format: "ISO8601"
    auto_generate: true
    timezone: "UTC"

  # Event counters
  power_outage_count:
    unit: "count"
    min: 0
    max: 9999
    default: 2
    persistent: true

  tamper_event_count:
    unit: "count"
    min: 0
    max: 9999
    default: 0
    persistent: true
    rare_event: true

  # Demand and load profile data
  maximum_demand_kw:
    unit: "kW"
    min: 0
    max: 100
    default: 8.5
    monthly_reset: true
    calculation_window: "15 minutes"

  reactive_power_kvar:
    unit: "kVar"
    min: -50
    max: 50
    default: 3.2
    power_factor_correlated: true

# Special device configurations
special_devices:
  # High consumption meters (commercial)
  high_consumption_meters:
    devices: ["SM00000005", "SM00000012", "SM00000018"]
    config:
      instantaneous_power_kw: [25, 35, 45]
      current_l1_a: [80, 100, 120]
      total_consumption_kwh: 98765.43
      device_type: "Commercial"

  # Low consumption meters (residential, night)
  low_consumption_meters:
    devices: ["SM00000008", "SM00000015", "SM00000022"]
    config:
      instantaneous_power_kw: [0.5, 1.0, 1.5]
      device_type: "Residential"
      time_profile: "night"

  # Fault meters
  fault_meters:
    devices: ["SM00000003", "SM00000009"]
    config:
      device_status: "Error"
      communication_status: "Offline"
      signal_strength: -110
      tamper_event_count: 1

  # Water leak detection
  leak_detected_meters:
    devices: ["SM00000011"]
    config:
      water_flow_rate_lpm: 0.1       # Small continuous flow = leak
      device_status: "Warning"
      leak_flag: true

# Time-based consumption patterns
time_patterns:
  residential_daily:
    peak_hours: ["06:00-09:00", "18:00-23:00"]
    base_load_kw: 0.2
    peak_load_kw: [3.0, 5.0]
    night_load_kw: 0.1

  commercial_daily:
    peak_hours: ["08:00-12:00", "13:00-18:00"]
    base_load_kw: 5.0
    peak_load_kw: [15.0, 35.0]
    night_load_kw: 2.0

  industrial_daily:
    peak_hours: ["06:00-22:00"]
    base_load_kw: 20.0
    peak_load_kw: [50.0, 100.0]
    night_load_kw: 15.0

# Seasonal variations
seasonal_factors:
  summer_jul_aug:
    electricity_multiplier: 1.3     # Air conditioning
    water_multiplier: 1.5           # More water usage

  winter_dec_feb:
    electricity_multiplier: 1.2     # Heating
    gas_multiplier: 2.0             # Heating
    water_multiplier: 0.8           # Less outdoor usage

  spring_mar_may:
    electricity_multiplier: 1.0
    gas_multiplier: 0.5
    water_multiplier: 1.1

# Data generation rules
generation_rules:
  update_intervals:
    normal_mode: 300                # 5 minutes
    high_load_mode: 60              # 1 minute
    emergency_mode: 10              # 10 seconds

  consumption_simulation:
    random_variation: 0.05          # 5% random variation
    load_profile_realism: true
    weather_correlation: true

  quality_simulation:
    voltage_variation: 0.02         # 2% voltage variation
    frequency_variation: 0.004      # 0.4% frequency variation
    thd_variation: 0.5              # THD variation ±0.5%

# Alert conditions
alert_conditions:
  high_consumption_alert:
    threshold_multiplier: 1.5       # 150% of average
    duration_minutes: 30

  power_outage_alert:
    voltage_threshold: 180          # V
    duration_seconds: 10

  communication_failure_alert:
    offline_timeout_minutes: 15

  tamper_alert:
    any_tamper_event: true

  leak_detection_alert:
    minimum_flow_rate_lpm: 0.05     # Continuous flow for 24 hours
  # Historical data simulation
historical:
  start_date: "2024-01-01"
  monthly_consumption_growth: 0.02  # 2% monthly growth
  seasonal_variance: 0.25          # 25% seasonal variation
  weather_impact: 0.15             # 15% weather correlation

  # Typical consumption profiles
  consumption_profiles:
    small_home:
      daily_kwh: 8
      monthly_kwh: 240
      peak_kw: 3.0

    large_home:
      daily_kwh: 25
      monthly_kwh: 750
      peak_kw: 8.0

    small_office:
      daily_kwh: 40
      monthly_kwh: 1200
      peak_kw: 15.0

    large_office:
      daily_kwh: 200
      monthly_kwh: 6000
      peak_kw: 50.0